{"remainingRequest":"F:\\wwwroot\\D2AdminICE-master\\node_modules\\babel-loader\\lib\\index.js!F:\\wwwroot\\D2AdminICE-master\\node_modules\\eslint-loader\\index.js??ref--13-0!F:\\wwwroot\\D2AdminICE-master\\src\\router\\index.js","dependencies":[{"path":"F:\\wwwroot\\D2AdminICE-master\\src\\router\\index.js","mtime":1552703395000},{"path":"F:\\wwwroot\\D2AdminICE-master\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1552703395000},{"path":"F:\\wwwroot\\D2AdminICE-master\\node_modules\\babel-loader\\lib\\index.js","mtime":1552703395000},{"path":"F:\\wwwroot\\D2AdminICE-master\\node_modules\\eslint-loader\\index.js","mtime":1552703395000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.function.name\";\nimport Vue from 'vue';\nimport VueRouter from 'vue-router'; // 进度条\n\nimport NProgress from 'nprogress';\nimport 'nprogress/nprogress.css';\nimport store from '@/store/index';\nimport util from '@/libs/util.js'; // 路由数据\n\nimport routes from '../routerConfig';\nVue.use(VueRouter); // 导出路由 在 main.js 里使用\n\nvar router = new VueRouter({\n  routes: routes\n});\n/**\n * 路由拦截\n * 权限验证\n */\n\nrouter.beforeEach(function (to, from, next) {\n  // 进度条\n  NProgress.start(); // 关闭搜索面板\n\n  store.commit('d2admin/search/set', false); // 验证当前路由所有的匹配中是否需要有登录验证的\n\n  if (to.matched.some(function (r) {\n    return r.meta.requiresAuth;\n  })) {\n    // 这里暂时将cookie里是否存有token作为验证是否登录的条件\n    // 请根据自身业务需要修改\n    var token = util.cookies.get('token');\n\n    if (token && token !== 'undefined') {\n      next();\n    } else {\n      // 将当前预计打开的页面完整地址临时存储 登录后继续跳转\n      // 这个 cookie(redirect) 会在登录后自动删除\n      util.cookies.set('redirect', to.fullPath); // 没有登录的时候跳转到登录界面\n\n      next({\n        name: 'login'\n      });\n    }\n  } else {\n    // 不需要身份校验 直接通过\n    next();\n  }\n});\nrouter.afterEach(function (to) {\n  // 进度条\n  NProgress.done(); // 需要的信息\n\n  var app = router.app;\n  var name = to.name,\n      params = to.params,\n      query = to.query; // 多页控制 打开新的页面\n\n  app.$store.dispatch('d2admin/page/open', {\n    name: name,\n    params: params,\n    query: query\n  }); // 更改标题\n\n  util.title(to.meta.title);\n});\nexport default router;",{"version":3,"sources":["F:\\wwwroot\\D2AdminICE-master\\src\\router\\index.js"],"names":["Vue","VueRouter","NProgress","store","util","routes","use","router","beforeEach","to","from","next","start","commit","matched","some","r","meta","requiresAuth","token","cookies","get","set","fullPath","name","afterEach","done","app","params","query","$store","dispatch","title"],"mappings":";AAAA,OAAOA,GAAP,MAAgB,KAAhB;AACA,OAAOC,SAAP,MAAsB,YAAtB,C,CAEA;;AACA,OAAOC,SAAP,MAAsB,WAAtB;AACA,OAAO,yBAAP;AAEA,OAAOC,KAAP,MAAkB,eAAlB;AAEA,OAAOC,IAAP,MAAiB,gBAAjB,C,CAEA;;AACA,OAAOC,MAAP,MAAmB,iBAAnB;AAEAL,GAAG,CAACM,GAAJ,CAAQL,SAAR,E,CAEA;;AACA,IAAMM,MAAM,GAAG,IAAIN,SAAJ,CAAc;AAC3BI,EAAAA,MAAM,EAANA;AAD2B,CAAd,CAAf;AAIA;;;;;AAIAE,MAAM,CAACC,UAAP,CAAkB,UAACC,EAAD,EAAKC,IAAL,EAAWC,IAAX,EAAoB;AACpC;AACAT,EAAAA,SAAS,CAACU,KAAV,GAFoC,CAGpC;;AACAT,EAAAA,KAAK,CAACU,MAAN,CAAa,oBAAb,EAAmC,KAAnC,EAJoC,CAKpC;;AACA,MAAIJ,EAAE,CAACK,OAAH,CAAWC,IAAX,CAAgB,UAAAC,CAAC;AAAA,WAAIA,CAAC,CAACC,IAAF,CAAOC,YAAX;AAAA,GAAjB,CAAJ,EAA+C;AAC7C;AACA;AACA,QAAMC,KAAK,GAAGf,IAAI,CAACgB,OAAL,CAAaC,GAAb,CAAiB,OAAjB,CAAd;;AACA,QAAIF,KAAK,IAAIA,KAAK,KAAK,WAAvB,EAAoC;AAClCR,MAAAA,IAAI;AACL,KAFD,MAEO;AACL;AACA;AACAP,MAAAA,IAAI,CAACgB,OAAL,CAAaE,GAAb,CAAiB,UAAjB,EAA6Bb,EAAE,CAACc,QAAhC,EAHK,CAIL;;AACAZ,MAAAA,IAAI,CAAC;AACHa,QAAAA,IAAI,EAAE;AADH,OAAD,CAAJ;AAGD;AACF,GAfD,MAeO;AACL;AACAb,IAAAA,IAAI;AACL;AACF,CAzBD;AA2BAJ,MAAM,CAACkB,SAAP,CAAiB,UAAAhB,EAAE,EAAI;AACrB;AACAP,EAAAA,SAAS,CAACwB,IAAV,GAFqB,CAGrB;;AACA,MAAMC,GAAG,GAAGpB,MAAM,CAACoB,GAAnB;AAJqB,MAKbH,IALa,GAKWf,EALX,CAKbe,IALa;AAAA,MAKPI,MALO,GAKWnB,EALX,CAKPmB,MALO;AAAA,MAKCC,KALD,GAKWpB,EALX,CAKCoB,KALD,EAMrB;;AACAF,EAAAA,GAAG,CAACG,MAAJ,CAAWC,QAAX,CAAoB,mBAApB,EAAyC;AAAEP,IAAAA,IAAI,EAAJA,IAAF;AAAQI,IAAAA,MAAM,EAANA,MAAR;AAAgBC,IAAAA,KAAK,EAALA;AAAhB,GAAzC,EAPqB,CAQrB;;AACAzB,EAAAA,IAAI,CAAC4B,KAAL,CAAWvB,EAAE,CAACQ,IAAH,CAAQe,KAAnB;AACD,CAVD;AAYA,eAAezB,MAAf","sourcesContent":["import Vue from 'vue'\nimport VueRouter from 'vue-router'\n\n// 进度条\nimport NProgress from 'nprogress'\nimport 'nprogress/nprogress.css'\n\nimport store from '@/store/index'\n\nimport util from '@/libs/util.js'\n\n// 路由数据\nimport routes from '../routerConfig'\n\nVue.use(VueRouter)\n\n// 导出路由 在 main.js 里使用\nconst router = new VueRouter({\n  routes\n})\n\n/**\n * 路由拦截\n * 权限验证\n */\nrouter.beforeEach((to, from, next) => {\n  // 进度条\n  NProgress.start()\n  // 关闭搜索面板\n  store.commit('d2admin/search/set', false)\n  // 验证当前路由所有的匹配中是否需要有登录验证的\n  if (to.matched.some(r => r.meta.requiresAuth)) {\n    // 这里暂时将cookie里是否存有token作为验证是否登录的条件\n    // 请根据自身业务需要修改\n    const token = util.cookies.get('token')\n    if (token && token !== 'undefined') {\n      next()\n    } else {\n      // 将当前预计打开的页面完整地址临时存储 登录后继续跳转\n      // 这个 cookie(redirect) 会在登录后自动删除\n      util.cookies.set('redirect', to.fullPath)\n      // 没有登录的时候跳转到登录界面\n      next({\n        name: 'login'\n      })\n    }\n  } else {\n    // 不需要身份校验 直接通过\n    next()\n  }\n})\n\nrouter.afterEach(to => {\n  // 进度条\n  NProgress.done()\n  // 需要的信息\n  const app = router.app\n  const { name, params, query } = to\n  // 多页控制 打开新的页面\n  app.$store.dispatch('d2admin/page/open', { name, params, query })\n  // 更改标题\n  util.title(to.meta.title)\n})\n\nexport default router\n"]}]}